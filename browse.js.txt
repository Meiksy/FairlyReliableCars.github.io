const cars = [
  {
    name: "Mitsubishi Lancer EVO VIII",
    img: "Images/evo8_1.jpg",
    page: "mitsubishi_evo8.html",
    keywords: ["mitsubishi", "lancer", "evo", "evo8"]
  },
  {
    name: "Subaru WRX STI",
    img: "Images/wrx_1.jpg",
    page: "subaru_wrx.html",
    keywords: ["subaru", "wrx", "sti", "impreza"]
  },
  {
    name: "Mazda RX-7",
    img: "Images/rx_1.jpg",
    page: "mazda_rx7.html",
    keywords: ["mazda", "rx7", "rx-7", "rotary"]
  }
];

const searchInput = document.getElementById('searchInput');
const searchBtn = document.getElementById('searchBtn');
const resultsContainer = document.querySelector('.car-listings');

function renderResults(carArray) {
  if (!resultsContainer) return;

  if (carArray.length === 0) {
    resultsContainer.innerHTML = `<p>No cars found.</p>`;
    return;
  }

  resultsContainer.innerHTML = carArray.map(car => `
    <div class="car-card">
      <img src="${car.img}" alt="${car.name}" />
      <h3>${car.name}</h3>
      <a href="${car.page}" class="btn">View Details</a>
    </div>
  `).join('');
}

function handleSearch() {
  const query = searchInput.value.trim().toLowerCase();

  if (!query) {
    renderResults(cars); // show all if no query
    return;
  }

  const filtered = cars.filter(car =>
    car.name.toLowerCase().includes(query) ||
    car.keywords.some(k => k.includes(query))
  );

  renderResults(filtered);
}

if (searchBtn && searchInput) {
  searchBtn.addEventListener('click', handleSearch);
  searchInput.addEventListener('keyup', e => {
    if (e.key === 'Enter') handleSearch();
  });
}

renderResults(cars); // Load all cars on first visit
